# Gorbagana RPC deployment spec - GitOps managed
# This file is the source of truth for deployment configuration
# Edit and commit to update the deployment
stack: stack_orchestrator/data/stacks/gorchain-rpc
deploy-to: k8s-kind
network:
  http-proxy:
    - host-name: rpc.gorbagana.wtf
      routes:
        - path: /
          proxy-to: agave-rpc:8899
        - path: /
          proxy-to: agave-rpc:8900
          websocket: true
  acme-email: admin@gorbagana.wtf
  ports:
    agave-rpc:
      - '8899'
      - '8900'
      - '8001'
      - 8001/udp
      - 9000/udp
      - 9001/udp
      - 9002/udp
      - 9003/udp
      - 9004/udp
      - 9005/udp
      - 9006/udp
      - 9007/udp
      - 9008/udp
      - 9009/udp
      - 9010/udp
      - 9011/udp
      - 9012/udp
      - 9013/udp
      - 9014/udp
      - 9015/udp
      - 9016/udp
      - 9017/udp
      - 9018/udp
      - 9019/udp
      - 9020/udp
      - 9021/udp
      - 9022/udp
      - 9023/udp
      - 9024/udp
      - 9025/udp
security:
  privileged: true
  unlimited-memlock: true
  capabilities:
    - IPC_LOCK
volumes:
  # Caddy certificates are stored in etcd (persisted via cluster-backups), not here
  rpc-config: ./data/rpc-config
  rpc-ledger: ./data/rpc-ledger
  rpc-accounts: ./data/rpc-accounts
config:
  VALIDATOR_ENTRYPOINT: gorbagana.vaasl.io:8001
  KNOWN_VALIDATOR: WWqjqgLBUYoJH9oUaoQHo1BfoVEifeZrWeoPEwdp969
  RUST_LOG: info
  RPC_PORT: '8899'
  GOSSIP_PORT: '8001'
  DYNAMIC_PORT_RANGE: 9000-9025
  SNAPSHOT_INTERVAL_SLOTS: '200'
  MAXIMUM_SNAPSHOTS_TO_RETAIN: '2'
  PUBLIC_RPC_ADDRESS: ''
  SOLANA_METRICS_CONFIG: ''
  FAUCET_ADDRESS: ''
configmaps:
  rpc-scripts-config: ./configmaps/rpc-scripts-config
